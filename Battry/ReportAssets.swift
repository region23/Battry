import Foundation

/// Встроенные ресурсы для HTML отчетов
enum EmbeddedResources {
    
    /// Встроенный CSS для uPlot (минифицированная версия)
    static let uPlotCSS = """
.uplot, .uplot *, .uplot *::before, .uplot *::after {box-sizing: border-box;}.uplot {font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.5;width: min-content;}.u-title {text-align: center;font-size: 18px;font-weight: bold;}.u-wrap {position: relative;user-select: none;}.u-over, .u-under {position: absolute;}.u-under {overflow: hidden;}.uplot canvas {display: block;position: relative;width: 100%;height: 100%;}.u-axis {position: absolute;}.u-legend {font-size: 14px;margin: auto;text-align: center;}.u-inline {display: block;}.u-inline * {display: inline-block;}.u-inline tr {margin-right: 16px;}.u-legend th {font-weight: 600;}.u-legend th > * {vertical-align: middle;display: inline-block;}.u-legend .u-marker {width: 1em;height: 1em;margin-right: 4px;background-clip: padding-box !important;}.u-inline.u-live th::after {content: ":";vertical-align: middle;}.u-inline:not(.u-live) .u-value {display: none;}.u-series > * {padding: 4px;}.u-series th {cursor: pointer;}.u-legend .u-off > * {opacity: 0.3;}.u-select {background: rgba(0,0,0,0.07);position: absolute;pointer-events: none;}.u-cursor-x, .u-cursor-y {position: absolute;left: 0;top: 0;pointer-events: none;will-change: transform;}.u-hz .u-cursor-x, .u-vt .u-cursor-y {height: 100%;border-right: 1px dashed #607D8B;}.u-hz .u-cursor-y, .u-vt .u-cursor-x {width: 100%;border-bottom: 1px dashed #607D8B;}.u-cursor-pt {position: absolute;top: 0;left: 0;border-radius: 50%;border: 0 solid;pointer-events: none;will-change: transform;/*this has to be !important since we set inline "background" shorthand */background-clip: padding-box !important;}.u-axis.u-off, .u-select.u-off, .u-cursor-x.u-off, .u-cursor-y.u-off, .u-cursor-pt.u-off {display: none;}
"""
    
    /// Встроенный JavaScript для uPlot (минифицированная версия)
    static let uPlotJS = """
/*! https://github.com/leeoniya/uPlot (v1.6.32) */
var uPlot=function(){"use strict";const l="u-off",e="u-label",t="width",n="height",i="top",o="bottom",s="left",r="right",u="#000",a=u+"0",f="mousemove",c="mousedown",h="mouseup",d="mouseenter",p="mouseleave",m="dblclick",g="change",x="dppxchange",w="--",_="undefined"!=typeof window,b=_?document:null,v=_?window:null,k=_?navigator:null;let y,M;function S(l,e){if(null!=e){let t=l.classList;!t.contains(e)&&t.add(e)}}function T(l,e){let t=l.classList;t.contains(e)&&t.remove(e)}function E(l,e,t){l.style[e]=t+"px"}function z(l,e,t,n){let i=b.createElement(l);return null!=e&&S(i,e),null!=t&&t.insertBefore(i,n),i}function D(l,e){return z("div",l,e)}const P=new WeakMap;function A(e,t,n,i,o){let s="translate("+t+"px,"+n+"px)";s!=P.get(e)&&(e.style.transform=s,P.set(e,s),0>t||0>n||t>i||n>o?S(e,l):T(e,l))}const W=new WeakMap;function Y(l,e,t){let n=e+t;n!=W.get(l)&&(W.set(l,n),l.style.background=e,l.style.borderColor=t)}const C=new WeakMap;function H(l,e,t,n){let i=e+""+t;i!=C.get(l)&&(C.set(l,i),l.style.height=t+"px",l.style.width=e+"px",l.style.marginLeft=n?-e/2+"px":0,l.style.marginTop=n?-t/2+"px":0)}const F={passive:!0},R={...F,capture:!0};function G(l,e,t,n){e.addEventListener(l,t,n?R:F)}function I(l,e,t){e.removeEventListener(l,t,F)}function L(l,e,t,n){let i;t=t||0;let o=2147483647>=(n=n||e.length-1);for(;n-t>1;)i=o?t+n>>1:sl((t+n)/2),l>e[i]?t=i:n=i;return l-e[t]>e[n]-l?n:t}function O(l){return(e,t,n)=>{let i=-1,o=-1;for(let o=t;n>=o;o++)if(l(e[o])){i=o;break}for(let i=n;i>=t;i--)if(l(e[i])){o=i;break}return[i,o]}}_&&function l(){let e=devicePixelRatio;y!=e&&(y=e,M&&I(g,M,l),M=matchMedia(`(min-resolution: ${y-.001}dppx) and (max-resolution: ${y+.001}dppx)`),G(g,M,l),v.dispatchEvent(new CustomEvent(x)))}();const N=l=>null!=l,j=l=>null!=l&&l>0,U=O(N),V=O(j);function B(l,e,t,n){let i=hl(l),o=hl(e);l==e&&(-1==i?(l*=t,e/=t):(l/=t,e*=t));let s=10==t?dl:pl,r=1==o?ul:sl,u=(1==i?sl:ul)(s(ol(l))),a=r(s(ol(e))),f=cl(t,u),c=cl(t,a);return 10==t&&(0>u&&(f=Al(f,-u)),0>a&&(c=Al(c,-a))),n||2==t?(l=f*i,e=c*o):(l=Pl(l,f),e=Dl(e,c)),[l,e]}function $(l,e,t,n){let i=B(l,e,t,n);return 0==l&&(i[0]=0),0==e&&(i[1]=0),i}const J=.1,q={mode:3,pad:J},K={pad:0,soft:null,mode:0},X={min:K,max:K};function Z(l,e,t,n){return Ol(t)?ll(l,e,t):(K.pad=t,K.soft=n?0:null,K.mode=n?3:0,ll(l,e,X))}function Q(l,e){return null==l?e:l}function ll(l,e,t){let n=t.min,i=t.max,o=Q(n.pad,0),s=Q(i.pad,0),r=Q(n.hard,-gl),u=Q(i.hard,gl),a=Q(n.soft,gl),f=Q(i.soft,-gl),c=Q(n.mode,0),h=Q(i.mode,0),d=e-l,p=dl(d),m=fl(ol(l),ol(e)),g=dl(m),x=ol(g-p);(1e-24>d||x>10)&&(d=0,0!=l&&0!=e||(d=1e-24,2==c&&a!=gl&&(o=0),2==h&&f!=-gl&&(s=0)));let w=d||m||1e3,_=dl(w),b=cl(10,sl(_)),v=Al(Pl(l-w*(0==d?0==l?.1:1:o),b/10),24),k=a>l||1!=c&&(3!=c||v>a)&&(2!=c||a>v)?gl:a,y=fl(r,k>v&&l>=k?k:al(k,v)),M=Al(Dl(e+w*(0==d?0==e?.1:1:s),b/10),24),S=e>f||1!=h&&(3!=h||f>M)&&(2!=h||M>f)?-gl:f,T=al(u,M>S&&S>=e?S:fl(S,M));return y==T&&0==y&&(T=100),[y,T]}const el=new Intl.NumberFormat(_?k.language:"en-US"),tl=l=>el.format(l),nl=Math,il=nl.PI,ol=nl.abs,sl=nl.floor,rl=nl.round,ul=nl.ceil,al=nl.min,fl=nl.max,cl=nl.pow,hl=nl.sign,dl=nl.log10,pl=nl.log2,ml=(l,e=1)=>nl.asinh(l/e),gl=1/0;function xl(l){return 1+(0|dl((l^l>>31)-(l>>31)))}function wl(l,e,t){return al(fl(l,e),t)}function _l(l){return"function"==typeof l}function bl(l){return _l(l)?l:()=>l}const vl=l=>l,kl=(l,e)=>e,yl=()=>null,Ml=()=>!0,Sl=(l,e)=>l==e,Tl=/\\.\\d*?(?=9{6,}|0{6,})/gm,El=l=>{if(Il(l)||Wl.has(l))return l;const e=""+l,t=e.match(Tl);if(null==t)return l;let n=t[0].length-1;if(-1!=e.indexOf("e-")){let[l,t]=e.split("e");return+`${El(l)}e${t}`}return Al(l,n)};function zl(l,e){return El(Al(El(l/e))*e)}function Dl(l,e){return El(ul(El(l/e))*e)}function Pl(l,e){return El(sl(El(l/e))*e)}function Al(l,e=0){if(Il(l))return l;let t=10**e;return rl(l*t*(1+Number.EPSILON))/t}const Wl=new Map;function Yl(l){return((""+l).split(".")[1]||"").length}function Cl(l,e,t,n){let i=[],o=n.map(Yl);for(let s=e;t>s;s++){let e=ol(s),t=Al(cl(l,s),e);for(let r=0;n.length>r;r++){let u=10==l?+`${n[r]}e${s}`:n[r]*t,a=(0>s?e:0)+(o[r]>s?o[r]:0),f=10==l?u:Al(u,a);i.push(f),Wl.set(f,a)}}return i}const Hl={},Fl=[],Rl=[null,null],Gl=Array.isArray,Il=Number.isInteger;function Ll(l){return"string"==typeof l}function Ol(l){let e=!1;if(null!=l){let t=l.constructor;e=null==t||t==Object}return e}function Nl(l){return null!=l&&"object"==typeof l}const jl=Object.getPrototypeOf(Uint8Array),Ul="__proto__";function Vl(l,e=Ol){let t;if(Gl(l)){let n=l.find((l=>null!=l));if(Gl(n)||e(n)){t=Array(l.length);for(let n=0;l.length>n;n++)t[n]=Vl(l[n],e)}else t=l.slice()}else if(l instanceof jl)t=l.slice();else if(e(l)){t={};for(let n in l)n!=Ul&&(t[n]=Vl(l[n],e))}else t=l;return t}function Bl(l){let e=arguments;for(let t=1;e.length>t;t++){let n=e[t];for(let e in n)e!=Ul&&(Ol(l[e])?Bl(l[e],Vl(n[e])):l[e]=Vl(n[e]))}return l}function $l(l,e,t){for(let n,i=0,o=-1;e.length>i;i++){let s=e[i];if(s>o){for(n=s-1;n>=0&&null==l[n];)l[n--]=null;for(n=s+1;t>n&&null==l[n];)l[o=n++]=null}}}const Jl="undefined"==typeof queueMicrotask?l=>Promise.resolve().then(l):queueMicrotask,ql=["January","February","March","April","May","June","July","August","September","October","November","December"],Kl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Xl(l){return l.slice(0,3)}const Zl=Kl.map(Xl),Ql=ql.map(Xl),le={MMMM:ql,MMM:Ql,WWWW:Kl,WWW:Zl};function ee(l){return(10>l?"0":"")+l}const te={YYYY:l=>l.getFullYear(),YY:l=>(l.getFullYear()+"").slice(2),MMMM:(l,e)=>e.MMMM[l.getMonth()],MMM:(l,e)=>e.MMM[l.getMonth()],MM:l=>ee(l.getMonth()+1),M:l=>l.getMonth()+1,DD:l=>ee(l.getDate()),D:l=>l.getDate(),WWWW:(l,e)=>e.WWWW[l.getDay()],WWW:(l,e)=>e.WWW[l.getDay()],HH:l=>ee(l.getHours()),H:l=>l.getHours(),h:l=>{let e=l.getHours();return 0==e?12:e>12?e-12:e},AA:l=>12>l.getHours()?"AM":"PM",aa:l=>12>l.getHours()?"am":"pm",a:l=>12>l.getHours()?"a":"p",mm:l=>ee(l.getMinutes()),m:l=>l.getMinutes(),ss:l=>ee(l.getSeconds()),s:l=>l.getSeconds(),fff:l=>function(l){return(10>l?"00":100>l?"0":"")+l}(l.getMilliseconds())};function ne(l,e){e=e||le;let t,n=[],i=/\\{([a-z]+)\\}|[^{]+/gi;for(;t=i.exec(l);)n.push("{"==t[0][0]?te[t[1]]:t[0]);return l=>{let t="";for(let i=0;n.length>i;i++)t+="string"==typeof n[i]?n[i]:n[i](l,e);return t}}const ie=(new Intl.DateTimeFormat).resolvedOptions().timeZone,oe=l=>l%1==0,se=[1,2,2.5,5],re=Cl(10,-32,0,se),ue=Cl(10,0,32,se),ae=ue.filter(oe),fe=re.concat(ue),ce="{YYYY}",he="\\n"+ce,de="{M}/{D}",pe="\\n"+de,me=pe+"/{YY}",ge="{aa}",xe="{h}:{mm}"+ge,we="\\n"+xe,_e=":{ss}",be=null;function ve(l){let e=1e3*l,t=60*e,n=60*t,i=24*n,o=30*i,s=365*i;return[(1==l?Cl(10,0,3,se).filter(oe):Cl(10,-3,0,se)).concat([e,5*e,10*e,15*e,30*e,t,5*t,10*t,15*t,30*t,n,2*n,3*n,4*n,6*n,8*n,12*n,i,2*i,3*i,4*i,5*i,6*i,7*i,8*i,9*i,10*i,15*i,o,2*o,3*o,4*o,6*o,s,2*s,5*s,10*s,25*s,50*s,100*s]),[[s,ce,be,be,be,be,be,be,1],[28*i,"{MMM}",he,be,be,be,be,be,1],[i,de,he,be,be,be,be,be,1],[n,"{h}"+ge,me,be,pe,be,be,be,1],[t,xe,me,be,pe,be,be,be,1],[e,_e,me+" "+xe,be,pe+" "+xe,be,we,be,1],[l,_e+".{fff}",me+" "+xe,be,pe+" "+xe,be,we,be,1]],function(e){return(r,u,a,f,c,h)=>{let d=[],p=c>=s,m=c>=o&&s>c,g=e(a),x=Al(g*l,3),w=Pe(g.getFullYear(),p?0:g.getMonth(),m||p?1:g.getDate()),_=Al(w*l,3);if(m||p){let t=m?c/o:0,n=p?c/s:0,i=x==_?x:Al(Pe(w.getFullYear()+n,w.getMonth()+t,1)*l,3),r=new Date(rl(i/l)),u=r.getFullYear(),a=r.getMonth();for(let o=0;f>=i;o++){let s=Pe(u+n*o,a+t*o,1),r=s-e(Al(s*l,3));i=Al((+s+r)*l,3),i>f||d.push(i)}}else{let o=i>c?c:i,s=_+(sl(a)-sl(x))+Dl(x-_,o);d.push(s);let p=e(s),m=p.getHours()+p.getMinutes()/t+p.getSeconds()/n,g=c/n,w=h/r.axes[u]._space;for(;s=Al(s+c,1==l?0:3),f>=s;)if(g>1){let l=sl(Al(m+g,6))%24,t=e(s).getHours()-l;t>1&&(t=-1),s-=t*n,m=(m+g)%24,.7>Al((s-d[d.length-1])/c,3)*w||d.push(s)}else d.push(s)}return d}}]}const[ke,ye,Me]=ve(1),[Se,Te,Ee]=ve(.001);function ze(l,e){return l.map((l=>l.map(((t,n)=>0==n||8==n||null==t?t:e(1==n||0==l[8]?t:l[1]+t)))))}function De(l,e){return(t,n,i,o,s)=>{let r,u,a,f,c,h,d=e.find((l=>s>=l[0]))||e[e.length-1];return n.map((e=>{let t=l(e),n=t.getFullYear(),i=t.getMonth(),o=t.getDate(),s=t.getHours(),p=t.getMinutes(),m=t.getSeconds(),g=n!=r&&d[2]||i!=u&&d[3]||o!=a&&d[4]||s!=f&&d[5]||p!=c&&d[6]||m!=h&&d[7]||d[1];return r=n,u=i,a=o,f=s,c=p,h=m,g(t)}))}}function Pe(l,e,t){return new Date(l,e,t)}function Ae(l,e){return e(l)}function We(l,e){return(t,n,i,o)=>null==o?w:e(l(n))}Cl(2,-53,53,[1]);const Ye={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function(l,e){let t=l.series[e];return t.width?t.stroke(l,e):t.points.width?t.points.stroke(l,e):null},fill:function(l,e){return l.series[e].fill(l,e)},dash:"solid"},idx:null,idxs:null,values:[]},Ce=[0,0];function He(l,e,t,n=!0){return l=>{0==l.button&&(!n||l.target==e)&&t(l)}}function Fe(l,e,t,n=!0){return l=>{(!n||l.target==e)&&t(l)}}const Re={show:!0,x:!0,y:!0,lock:!1,move:function(l,e,t){return Ce[0]=e,Ce[1]=t,Ce},points:{one:!1,show:function(l,e){let i=l.cursor.points,o=D(),s=i.size(l,e);E(o,t,s),E(o,n,s);let r=s/-2;E(o,"marginLeft",r),E(o,"marginTop",r);let u=i.width(l,e,s);return u&&E(o,"borderWidth",u),o},size:function(l,e){return l.series[e].points.size},width:0,stroke:function(l,e){let t=l.series[e].points;return t._stroke||t._fill},fill:function(l,e){let t=l.series[e].points;return t._fill||t._stroke}},bind:{mousedown:He,mouseup:He,click:He,dblclick:He,mousemove:Fe,mouseleave:Fe,mouseenter:Fe},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(l,e)=>{e.stopPropagation(),e.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(l,e,t,n,i)=>n-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ge={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ie=Bl({},Ge,{filter:kl}),Le=Bl({},Ie,{size:10}),Oe=Bl({},Ge,{show:!1}),Ne='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',je="bold "+Ne,Ue={show:!0,scale:"x",stroke:u,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:je,side:2,grid:Ie,ticks:Le,border:Oe,font:Ne,lineGap:1.5,rotate:0},Ve={show:!0,scale:"x",auto:!1,sorted:1,min:gl,max:-gl,idxs:[]};function Be(l,e){return e.map((l=>null==l?"":tl(l)))}function $e(l,e,t,n,i,o,s){let r=[],u=Wl.get(i)||0;for(let l=t=s?t:Al(Dl(t,i),u);n>=l;l=Al(l+i,u))r.push(Object.is(l,-0)?0:l);return r}function Je(l,e,t,n,i){const o=[],s=l.scales[l.axes[e].scale].log,r=sl((10==s?dl:pl)(t));i=cl(s,r),10==s&&(i=fe[L(i,fe)]);let u=t,a=i*s;10==s&&(a=fe[L(a,fe)]);do{o.push(u),u+=i,10!=s||Wl.has(u)||(u=Al(u,Wl.get(i))),a>u||(a=(i=u)*s,10==s&&(a=fe[L(a,fe)]))}while(n>=u);return o}function qe(l,e,t,n,i){let o=l.scales[l.axes[e].scale].asinh,s=n>o?Je(l,e,fl(o,t),n,i):[o],r=0>n||t>0?[]:[0];return(-o>t?Je(l,e,fl(o,-n),-t,i):[o]).reverse().map((l=>-l)).concat(r,s)}const Ke=/./,Xe=/[12357]/,Ze=/[125]/,Qe=/1/,lt=(l,e,t,n)=>l.map(((l,i)=>4==e&&0==l||i%n==0&&t.test(l.toExponential()[0>l?1:0])?l:null));function et(l,e,t){let n=l.axes[t],i=n.scale,o=l.scales[i],s=l.valToPos,r=n._space,u=s(10,i),a=s(9,i)-u<r?s(7,i)-u<r?s(5,i)-u<r?Qe:Ze:Xe:Ke;if(a==Qe){let l=ol(s(1,i)-u);if(r>l)return lt(e.slice().reverse(),o.distr,a,ul(r/l)).reverse()}return lt(e,o.distr,a,1)}function tt(l,e,t){let n=l.axes[t],i=n.scale,o=n._space,s=l.valToPos,r=ol(s(1,i)-s(2,i));return o>r?lt(e.slice().reverse(),3,Ke,ul(o/r)).reverse():e}function nt(l,e,t,n){return null==n?w:null==e?"":tl(e)}const it={show:!0,scale:"y",stroke:u,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:je,side:3,grid:Ie,ticks:Le,border:Oe,font:Ne,lineGap:1.5,rotate:0},ot={scale:null,auto:!0,sorted:0,min:gl,max:-gl},st=(l,e,t,n,i)=>i,rt={show:!0,auto:!0,sorted:0,gaps:st,alpha:1,facets:[Bl({},ot,{scale:"x"}),Bl({},ot,{scale:"y"})]},ut={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:st,alpha:1,points:{show:function(l,e){let{scale:t,idxs:n}=l.series[0],i=l._data[0],o=l.valToPos(i[n[0]],t,!0),s=l.valToPos(i[n[1]],t,!0);return ol(s-o)/(l.series[e].points.space*y)>=n[1]-n[0]},filter:null},values:null,min:gl,max:-gl,idxs:[],path:null,clip:null};function at(l,e,t){return t/10}const ft={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},ct=Bl({},ft,{time:!1,ori:1}),ht={};function dt(l){let e=ht[l];return e||(e={key:l,plots:[],sub(l){e.plots.push(l)},unsub(l){e.plots=e.plots.filter((e=>e!=l))},pub(l,t,n,i,o,s,r){for(let u=0;e.plots.length>u;u++)e.plots[u]!=t&&e.plots[u].pub(l,t,n,i,o,s,r)}},null!=l&&(ht[l]=e)),e}function pt(l,e,t){const n=l.mode,i=l.series[e],o=2==n?l._data[e]:l._data,s=l.scales,r=l.bbox;let u=o[0],a=2==n?o[1]:o[e],f=2==n?s[i.facets[0].scale]:s[l.series[0].scale],c=2==n?s[i.facets[1].scale]:s[i.scale],h=r.left,d=r.top,p=r.width,m=r.height,g=l.valToPosH,x=l.valToPosV;return 0==f.ori?t(i,u,a,f,c,g,x,h,d,p,m,kt,Mt,Tt,zt,Pt):t(i,u,a,f,c,x,g,d,h,m,p,yt,St,Et,Dt,At)}function mt(l,e){let t=0,n=0,i=Q(l.bands,Fl);for(let l=0;i.length>l;l++){let o=i[l];o.series[0]==e?t=o.dir:o.series[1]==e&&(n|=1==o.dir?1:2)}return[t,1==n?-1:2==n?1:3==n?2:0]}function gt(l,e,t,n,i){let o=l.series[e],s=l.scales[2==l.mode?o.facets[1].scale:o.scale];return-1==i?s.min:1==i?s.max:3==s.distr?1==s.dir?s.min:s.max:0}function xt(l,e,t,n,i,o){return pt(l,e,((l,e,s,r,u,a,f,c,h,d,p)=>{let m=l.pxRound;const g=0==r.ori?Mt:St;let x,w;1==r.dir*(0==r.ori?1:-1)?(x=t,w=n):(x=n,w=t);let _=m(a(e[x],r,d,c)),b=m(f(s[x],u,p,h)),v=m(a(e[w],r,d,c)),k=m(f(1==o?u.max:u.min,u,p,h)),y=new Path2D(i);return g(y,v,k),g(y,_,k),g(y,_,b),y}))}function wt(l,e,t,n,i,o){let s=null;if(l.length>0){s=new Path2D;const r=0==e?Tt:Et;let u=t;for(let e=0;l.length>e;e++){let t=l[e];if(t[1]>t[0]){let l=t[0]-u;l>0&&r(s,u,n,l,n+o),u=t[1]}}let a=t+i-u,f=10;a>0&&r(s,u,n-f/2,a,n+o+f)}return s}function _t(l,e,t,n,i,o,s){let r=[],u=l.length;for(let a=1==i?t:n;a>=t&&n>=a;a+=i)if(null===e[a]){let f=a,c=a;if(1==i)for(;++a<=n&&null===e[a];)c=a;else for(;--a>=t&&null===e[a];)c=a;let h=o(l[f]),d=c==f?h:o(l[c]),p=f-i;h=s>0||0>p||p>=u?h:o(l[p]);let m=c+i;d=0>s||0>m||m>=u?d:o(l[m]),h>d||r.push([h,d])}return r}function bt(l){return 0==l?vl:1==l?rl:e=>zl(e,l)}function vt(l){let e=0==l?kt:yt,t=0==l?(l,e,t,n,i,o)=>{l.arcTo(e,t,n,i,o)}:(l,e,t,n,i,o)=>{l.arcTo(t,e,i,n,o)},n=0==l?(l,e,t,n,i)=>{l.rect(e,t,n,i)}:(l,e,t,n,i)=>{l.rect(t,e,i,n)};return(l,i,o,s,r,u=0,a=0)=>{0==u&&0==a?n(l,i,o,s,r):(u=al(u,s/2,r/2),a=al(a,s/2,r/2),e(l,i+u,o),t(l,i+s,o,i+s,o+r,u),t(l,i+s,o+r,i,o+r,a),t(l,i,o+r,i,o,a),t(l,i,o,i+s,o,u),l.closePath())}}const kt=(l,e,t)=>{l.moveTo(e,t)},yt=(l,e,t)=>{l.moveTo(t,e)},Mt=(l,e,t)=>{l.lineTo(e,t)},St=(l,e,t)=>{l.lineTo(t,e)},Tt=vt(0),Et=vt(1),zt=(l,e,t,n,i,o)=>{l.arc(e,t,n,i,o)},Dt=(l,e,t,n,i,o)=>{l.arc(t,e,n,i,o)},Pt=(l,e,t,n,i,o,s)=>{l.bezierCurveTo(e,t,n,i,o,s)},At=(l,e,t,n,i,o,s)=>{l.bezierCurveTo(t,e,i,n,s,o)};function Wt(){return(l,e,t,n,i)=>pt(l,e,((e,o,s,r,u,a,f,c,h,d,p)=>{let m,g,{pxRound:x,points:w}=e;0==r.ori?(m=kt,g=zt):(m=yt,g=Dt);const _=Al(w.width*y,3);let b=(w.size-w.width)/2*y,v=Al(2*b,3),k=new Path2D,M=new Path2D,{left:S,top:T,width:E,height:z}=l.bbox;Tt(M,S-v,T-v,E+2*v,z+2*v);const D=l=>{if(null!=s[l]){let e=x(a(o[l],r,d,c)),t=x(f(s[l],u,p,h));m(k,e+b,t),g(k,e,t,b,0,2*il)}};if(i)i.forEach(D);else for(let l=t;n>=l;l++)D(l);return{stroke:_>0?k:null,fill:k,clip:M,flags:3}}))}function Yt(l){return(e,t,n,i,o,s)=>{n!=i&&(o!=n&&s!=n&&l(e,t,n),o!=i&&s!=i&&l(e,t,i),l(e,t,s))}}const Ct=Yt(Mt),Ht=Yt(St);function Ft(l){const e=Q(l?.alignGaps,0);return(l,t,n,i)=>pt(l,t,((o,s,r,u,a,f,c,h,d,p,m)=>{[n,i]=U(r,n,i);let g,x,w=o.pxRound,_=l=>w(f(l,u,p,h)),b=l=>w(c(l,a,m,d));0==u.ori?(g=Mt,x=Ct):(g=St,x=Ht);const v=u.dir*(0==u.ori?1:-1),k={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},y=k.stroke;let M=!1;if(i-n<4*p)for(let l=1==v?n:i;l>=n&&i>=l;l+=v){let e=r[l];null===e?M=!0:null!=e&&g(y,_(s[l]),b(e))}else{let e,t,o,a=e=>l.posToVal(e,u.key,!0),f=null,c=null,h=_(s[1==v?n:i]),d=_(s[n]),p=_(s[i]),m=a(1==v?d+1:p-1);for(let l=1==v?n:i;l>=n&&i>=l;l+=v){let n=s[l],i=(1==v?m>n:n>m)?h:_(n),o=r[l];i==h?null!=o?(t=o,null==f?(g(y,i,b(t)),e=f=c=t):f>t?f=t:t>c&&(c=t)):null===o&&(M=!0):(null!=f&&x(y,h,b(f),b(c),b(e),b(t)),null!=o?(t=o,g(y,i,b(t)),f=c=e=t):(f=c=null,null===o&&(M=!0)),h=i,m=a(h+v))}null!=f&&f!=c&&o!=h&&x(y,h,b(f),b(c),b(e),b(t))}let[S,T]=mt(l,t);if(null!=o.fill||0!=S){let e=k.fill=new Path2D(y),r=b(o.fillTo(l,t,o.min,o.max,S)),u=_(s[n]),a=_(s[i]);-1==v&&([a,u]=[u,a]),g(e,a,r),g(e,u,r)}if(!o.spanGaps){let a=[];M&&a.push(..._t(s,r,n,i,v,_,e)),k.gaps=a=o.gaps(l,t,n,i,a),k.clip=wt(a,u.ori,h,d,p,m)}return 0!=T&&(k.band=2==T?[xt(l,t,n,i,y,-1),xt(l,t,n,i,y,1)]:xt(l,t,n,i,y,T)),k}))}function Rt(l,e,t,n,i,o,s=gl){if(l.length>1){let r=null;for(let u=0,a=1/0;l.length>u;u++)if(void 0!==e[u]){if(null!=r){let e=ol(l[u]-l[r]);a>e&&(a=e,s=ol(t(l[u],n,i,o)-t(l[r],n,i,o)))}r=u}}return s}function Gt(l,e,t,n,i){const o=l.length;if(2>o)return null;const s=new Path2D;if(t(s,l[0],e[0]),2==o)n(s,l[1],e[1]);else{let t=Array(o),n=Array(o-1),r=Array(o-1),u=Array(o-1);for(let t=0;o-1>t;t++)r[t]=e[t+1]-e[t],u[t]=l[t+1]-l[t],n[t]=r[t]/u[t];t[0]=n[0];for(let l=1;o-1>l;l++)0===n[l]||0===n[l-1]||n[l-1]>0!=n[l]>0?t[l]=0:(t[l]=3*(u[l-1]+u[l])/((2*u[l]+u[l-1])/n[l-1]+(u[l]+2*u[l-1])/n[l]),isFinite(t[l])||(t[l]=0));t[o-1]=n[o-2];for(let n=0;o-1>n;n++)i(s,l[n]+u[n]/3,e[n]+t[n]*u[n]/3,l[n+1]-u[n]/3,e[n+1]-t[n+1]*u[n]/3,l[n+1],e[n+1])}return s}const It=new Set;function Lt(){for(let l of It)l.syncRect(!0)}_&&(G("resize",v,Lt),G("scroll",v,Lt,!0),G(x,v,(()=>{en.pxRatio=y})));const Ot=Ft(),Nt=Wt();function jt(l,e,t,n){return(n?[l[0],l[1]].concat(l.slice(2)):[l[0]].concat(l.slice(1))).map(((l,n)=>Ut(l,n,e,t)))}function Ut(l,e,t,n){return Bl({},0==e?t:n,l)}function Vt(l,e,t){return null==e?Rl:[e,t]}const Bt=Vt;function $t(l,e,t){return null==e?Rl:Z(e,t,J,!0)}function Jt(l,e,t,n){return null==e?Rl:B(e,t,l.scales[n].log,!1)}const qt=Jt;function Kt(l,e,t,n){return null==e?Rl:$(e,t,l.scales[n].log,!1)}const Xt=Kt;function Zt(l,e,t,n,i){let o=fl(xl(l),xl(e)),s=e-l,r=L(i/n*s,t);do{let l=t[r],e=n*l/s;if(e>=i&&17>=o+(5>l?Wl.get(l):0))return[l,e]}while(++r<t.length);return[0,0]}function Qt(l){let e,t;return[l=l.replace(/(\\d+)px/,((l,n)=>(e=rl((t=+n)*y))+"px")),e,t]}function ln(l){l.show&&[l.font,l.labelFont].forEach((l=>{let e=Al(l[2]*y,1);l[0]=l[0].replace(/[0-9.]+px/,e+"px"),l[1]=e}))}function en(u,g,_){const k={mode:Q(u.mode,1)},M=k.mode;function P(l,e,t,n){let i=e.valToPct(l);return n+t*(-1==e.dir?1-i:i)}function W(l,e,t,n){let i=e.valToPct(l);return n+t*(-1==e.dir?i:1-i)}function C(l,e,t,n){return 0==e.ori?P(l,e,t,n):W(l,e,t,n)}k.valToPosH=P,k.valToPosV=W;let F=!1;k.status=0;const R=k.root=D("uplot");null!=u.id&&(R.id=u.id),S(R,u.class),u.title&&(D("u-title",R).textContent=u.title);const O=z("canvas"),K=k.ctx=O.getContext("2d"),X=D("u-wrap",R);G("click",X,(l=>{l.target===el&&(Nn!=Gn||jn!=In)&&Zn.click(k,l)}),!0);const ll=k.under=D("u-under",X);X.appendChild(O);const el=k.over=D("u-over",X),tl=+Q((u=Vl(u)).pxAlign,1),sl=bt(tl);(u.plugins||[]).forEach((l=>{l.opts&&(u=l.opts(k,u)||u)}));const hl=u.ms||.001,pl=k.series=1==M?jt(u.series||[],Ve,ut,!1):function(l,e){return l.map(((l,t)=>0==t?{}:Bl({},e,l)))}(u.series||[null],rt),xl=k.axes=jt(u.axes||[],Ue,it,!0),vl=k.scales={},Tl=k.bands=u.bands||[];Tl.forEach((l=>{l.fill=bl(l.fill||null),l.dir=Q(l.dir,-1)}));const El=2==M?pl[1].facets[0].scale:pl[0].scale,Dl={axes:function(){for(let l=0;xl.length>l;l++){let e=xl[l];if(!e.show||!e._show)continue;let t,n,u=e.side,a=u%2,f=e.stroke(k,l),c=0==u||3==u?-1:1,[h,d]=e._found;if(null!=e.label){let s=rl((e._lpos+e.labelGap*c)*y);_n(e.labelFont[0],f,"center",2==u?i:o),K.save(),1==a?(t=n=0,K.translate(s,rl(lt+st/2)),K.rotate((3==u?-il:il)/2)):(t=rl(Qe+ot/2),n=s);let r=_l(e.label)?e.label(k,l,h,d):e.label;K.fillText(r,t,n),K.restore()}if(0==d)continue;let p=vl[e.scale],m=0==a?ot:st,g=0==a?Qe:lt,x=e._splits,w=2==p.distr?x.map((l=>pn[l])):x,_=2==p.distr?pn[x[1]]-pn[x[0]]:h,b=e.ticks,v=e.border,M=b.show?b.size:0,S=rl(M*y),T=rl((2==e.alignTo?e._size-M-e.gap:e.gap)*y),E=e._rotate*-il/180,z=sl(e._pos*y),D=z+(S+T)*c;n=0==a?D:0,t=1==a?D:0,_n(e.font[0],f,1==e.align?s:2==e.align?r:E>0?s:0>E?r:0==a?"center":3==u?r:s,E||1==a?"middle":2==u?i:o);let P=e.font[1]*e.lineGap,A=x.map((l=>sl(C(l,p,m,g)))),W=e._values;for(let l=0;W.length>l;l++){let e=W[l];if(null!=e){0==a?t=A[l]:n=A[l],e=""+e;let i=-1==e.indexOf("\\n")?[e]:e.split(/\\n/gm);for(let l=0;i.length>l;l++){let e=i[l];E?(K.save(),K.translate(t,n+l*P),K.rotate(E),K.fillText(e,0,0),K.restore()):K.fillText(e,t,n+l*P)}}}b.show&&zn(A,b.filter(k,w,l,d,_),a,u,z,S,Al(b.width*y,3),b.stroke(k,l),b.dash,b.cap);let Y=e.grid;Y.show&&zn(A,Y.filter(k,w,l,d,_),a,0==a?2:1,0==a?lt:Qe,0==a?st:ot,Al(Y.width*y,3),Y.stroke(k,l),Y.dash,Y.cap),v.show&&zn([z],[1],0==a?1:0,0==a?1:2,1==a?lt:Qe,1==a?st:ot,Al(v.width*y,3),v.stroke(k,l),v.dash,v.cap)}Ci("drawAxes")},series:function(){if(Gt>0){let l=pl.some((l=>l._focus))&&dn!=Tt.alpha;l&&(K.globalAlpha=dn=Tt.alpha),pl.forEach(((l,e)=>{if(e>0&&l.show&&(kn(e,!1),kn(e,!0),null==l._paths)){let t=dn;dn!=l.alpha&&(K.globalAlpha=dn=l.alpha);let n=2==M?[0,g[e][0].length-1]:function(l){let e=wl(Lt-1,0,Gt-1),t=wl(en+1,0,Gt-1);for(;null==l[e]&&e>0;)e--;for(;null==l[t]&&Gt-1>t;)t++;return[e,t]}(g[e]);l._paths=l.paths(k,e,n[0],n[1]),dn!=t&&(K.globalAlpha=dn=t)}})),pl.forEach(((l,e)=>{if(e>0&&l.show){let t=dn;dn!=l.alpha&&(K.globalAlpha=dn=l.alpha),null!=l._paths&&yn(e,!1);{let t=null!=l._paths?l._paths.gaps:null,n=l.points.show(k,e,Lt,en,t),i=l.points.filter(k,e,n,t);(n||i)&&(l.points._paths=l.points.paths(k,e,Lt,en,i),yn(e,!0))}dn!=t&&(K.globalAlpha=dn=t),Ci("drawSeries",e)}})),l&&(K.globalAlpha=dn=1)}}},Pl=(u.drawOrder||["axes","series"]).map((l=>Dl[l]));function Cl(l){const e=3==l.distr?e=>dl(e>0?e:l.clamp(k,e,l.min,l.max,l.key)):4==l.distr?e=>ml(e,l.asinh):100==l.distr?e=>l.fwd(e):l=>l;return t=>{let n=e(t),{_min:i,_max:o}=l;return(n-i)/(o-i)}}function Il(l){let e=vl[l];if(null==e){let t=(u.scales||Hl)[l]||Hl;if(null!=t.from){Il(t.from);let e=Bl({},vl[t.from],t,{key:l});e.valToPct=Cl(e),vl[l]=e}else{e=vl[l]=Bl({},l==El?ft:ct,t),e.key=l;let n=e.time,i=e.range,o=Gl(i);if((l!=El||2==M&&!n)&&(!o||null!=i[0]&&null!=i[1]||(i={min:null==i[0]?q:{mode:1,hard:i[0],soft:i[0]},max:null==i[1]?q:{mode:1,hard:i[1],soft:i[1]}},o=!1),!o&&Ol(i))){let l=i;i=(e,t,n)=>null==t?Rl:Z(t,n,l)}e.range=bl(i||(n?Bt:l==El?3==e.distr?qt:4==e.distr?Xt:Vt:3==e.distr?Jt:4==e.distr?Kt:$t)),e.auto=bl(!o&&e.auto),e.clamp=bl(e.clamp||at),e._min=e._max=null,e.valToPct=Cl(e)}}}Il("x"),Il("y"),1==M&&pl.forEach((l=>{Il(l.scale)})),xl.forEach((l=>{Il(l.scale)}));for(let l in u.scales)Il(l);const jl=vl[El],Ul=jl.distr;let $l,ql;0==jl.ori?(S(R,"u-hz"),$l=P,ql=W):(S(R,"u-vt"),$l=W,ql=P);const Kl={};for(let l in vl){let e=vl[l];null==e.min&&null==e.max||(Kl[l]={min:e.min,max:e.max},e.min=e.max=null)}const Xl=u.tzDate||(l=>new Date(rl(l/hl))),Zl=u.fmtDate||ne,Ql=1==hl?Me(Xl):Ee(Xl),le=De(Xl,ze(1==hl?ye:Te,Zl)),ee=We(Xl,Ae("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",Zl)),te=[],ie=k.legend=Bl({},Ye,u.legend),oe=k.cursor=Bl({},Re,{drag:{y:2==M}},u.cursor),se=ie.show,re=oe.show,ue=ie.markers;let ce,he,de;ie.idxs=te,ue.width=bl(ue.width),ue.dash=bl(ue.dash),ue.stroke=bl(ue.stroke),ue.fill=bl(ue.fill);let pe,me=[],ge=[],xe=!1,we={};if(ie.live){const l=pl[1]?pl[1].values:null;xe=null!=l,pe=xe?l(k,1,0):{_:0};for(let l in pe)we[l]=w}if(se)if(ce=z("table","u-legend",R),de=z("tbody",null,ce),ie.mount(k,ce),xe){he=z("thead",null,ce,de);let l=z("tr",null,he);for(var _e in z("th",null,l),pe)z("th",e,l).textContent=_e}else S(ce,"u-inline"),ie.live&&S(ce,"u-live");const be={show:!0},ve={show:!1},Pe=new Map;function Ce(l,e,t,n=!0){const i=Pe.get(e)||{},o=oe.bind[l](k,e,t,n);o&&(G(l,e,i[l]=o),Pe.set(e,i))}function He(l,e){const t=Pe.get(e)||{};for(let n in t)null!=l&&n!=l||(I(n,e,t[n]),delete t[n]);null==l&&Pe.delete(e)}let Fe=0,Ge=0,Ie=0,Le=0,Oe=0,Ne=0,je=Oe,Ke=Ne,Xe=Ie,Ze=Le,Qe=0,lt=0,ot=0,st=0;k.bbox={};let ht=!1,pt=!1,mt=!1,xt=!1,wt=!1,_t=!1;function vt(l,e,t){(t||l!=k.width||e!=k.height)&&kt(l,e),An(!1),mt=!0,pt=!0,Jn()}function kt(l,e){k.width=Fe=Ie=l,k.height=Ge=Le=e,Oe=Ne=0,function(){let l=!1,e=!1,t=!1,n=!1;xl.forEach((i=>{if(i.show&&i._show){let{side:o,_size:s}=i,r=s+(null!=i.label?i.labelSize:0);r>0&&(o%2?(Ie-=r,3==o?(Oe+=r,n=!0):t=!0):(Le-=r,0==o?(Ne+=r,l=!0):e=!0))}})),Ct[0]=l,Ct[1]=t,Ct[2]=e,Ct[3]=n,Ie-=Rt[1]+Rt[3],Oe+=Rt[3],Le-=Rt[2]+Rt[0],Ne+=Rt[0]}(),function(){let l=Oe+Ie,e=Ne+Le,t=Oe,n=Ne;function i(i,o){switch(i){case 1:return l+=o,l-o;case 2:return e+=o,e-o;case 3:return t-=o,t+o;case 0:return n-=o,n+o}}xl.forEach((l=>{if(l.show&&l._show){let e=l.side;l._pos=i(e,l._size),null!=l.label&&(l._lpos=i(e,l.labelSize))}}))}();let t=k.bbox;Qe=t.left=zl(Oe*y,.5),lt=t.top=zl(Ne*y,.5),ot=t.width=zl(Ie*y,.5),st=t.height=zl(Le*y,.5)}const yt=3;if(k.setSize=function({width:l,height:e}){vt(l,e)},null==oe.dataIdx){let l=oe.hover,e=l.skip=new Set(l.skip??[]);e.add(void 0);let t=l.prox=bl(l.prox),n=l.bias??=0;oe.dataIdx=(l,i,o,s)=>{if(0==i)return o;let r=o,u=t(l,i,o,s)??gl,a=u>=0&&gl>u,f=0==jl.ori?Ie:Le,c=oe.left,h=g[0],d=g[i];if(e.has(d[o])){r=null;let l,t=null,i=null;if(0==n||-1==n)for(l=o;null==t&&l-- >0;)e.has(d[l])||(t=l);if(0==n||1==n)for(l=o;null==i&&l++<d.length;)e.has(d[l])||(i=l);if(null!=t||null!=i)if(a){let l=c-(null==t?-1/0:$l(h[t],jl,f,0)),e=(null==i?1/0:$l(h[i],jl,f,0))-c;l>e?e>u||(r=i):l>u||(r=t)}else r=null==i?t:null==t||o-t>i-o?i:t}else a&&ol(c-$l(h[o],jl,f,0))>u&&(r=null);return r}}const Mt=l=>{oe.event=l};oe.idxs=te,oe._lock=!1;let St=oe.points;St.show=bl(St.show),St.size=bl(St.size),St.stroke=bl(St.stroke),St.width=bl(St.width),St.fill=bl(St.fill);const Tt=k.focus=Bl({},u.focus||{alpha:.3},oe.focus),Et=Tt.prox>=0,zt=Et&&St.one;let Dt=[],Pt=[],At=[];function Wt(l,e){let t=St.show(k,e);if(t instanceof HTMLElement)return S(t,"u-cursor-pt"),S(t,l.class),A(t,-10,-10,Ie,Le),el.insertBefore(t,Dt[e]),t}function Yt(t,n){if(1==M||n>0){let l=1==M&&vl[t.scale].time,e=t.value;t.value=l?Ll(e)?We(Xl,Ae(e,Zl)):e||ee:e||nt,t.label=t.label||(l?"Time":"Value")}if(zt||n>0){t.width=null==t.width?1:t.width,t.paths=t.paths||Ot||yl,t.fillTo=bl(t.fillTo||gt),t.pxAlign=+Q(t.pxAlign,tl),t.pxRound=bt(t.pxAlign),t.stroke=bl(t.stroke||null),t.fill=bl(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let l=function(l){return Al(1*(3+2*(l||1)),3)}(fl(1,t.width)),e=t.points=Bl({},{size:l,width:fl(1,.2*l),stroke:t.stroke,space:2*l,paths:Nt,_stroke:null,_fill:null},t.points);e.show=bl(e.show),e.filter=bl(e.filter),e.fill=bl(e.fill),e.stroke=bl(e.stroke),e.paths=bl(e.paths),e.pxAlign=t.pxAlign}if(se){let i=function(t,n){if(0==n&&(xe||!ie.live||2==M))return Rl;let i=[],o=z("tr","u-series",de,de.childNodes[n]);S(o,t.class),t.show||S(o,l);let s=z("th",null,o);if(ue.show){let l=D("u-marker",s);if(n>0){let e=ue.width(k,n);e&&(l.style.border=e+"px "+ue.dash(k,n)+" "+ue.stroke(k,n)),l.style.background=ue.fill(k,n)}}let r=D(e,s);for(var u in t.label instanceof HTMLElement?r.appendChild(t.label):r.textContent=t.label,n>0&&(ue.show||(r.style.color=t.width>0?ue.stroke(k,n):ue.fill(k,n)),Ce("click",s,(l=>{if(oe._lock)return;Mt(l);let e=pl.indexOf(t);if((l.ctrlKey||l.metaKey)!=ie.isolate){let l=pl.some(((l,t)=>t>0&&t!=e&&l.show));pl.forEach(((t,n)=>{n>0&&oi(n,l?n==e?be:ve:be,!0,Fi.setSeries)}))}else oi(e,{show:!t.show},!0,Fi.setSeries)}),!1),Et&&Ce(d,s,(l=>{oe._lock||(Mt(l),oi(pl.indexOf(t),ai,!0,Fi.setSeries))}),!1)),pe){let l=z("td","u-value",o);l.textContent="--",i.push(l)}return[o,i]}(t,n);me.splice(n,0,i[0]),ge.splice(n,0,i[1]),ie.values.push(null)}if(re){te.splice(n,0,null);let l=null;zt?0==n&&(l=Wt(t,n)):n>0&&(l=Wt(t,n)),Dt.splice(n,0,l),Pt.splice(n,0,0),At.splice(n,0,0)}Ci("addSeries",n)}k.addSeries=function(l,e){e=null==e?pl.length:e,l=1==M?Ut(l,e,Ve,ut):Ut(l,e,{},rt),pl.splice(e,0,l),Yt(pl[e],e)},k.delSeries=function(l){if(pl.splice(l,1),se){ie.values.splice(l,1),ge.splice(l,1);let e=me.splice(l,1)[0];He(null,e.firstChild),e.remove()}re&&(te.splice(l,1),Dt.splice(l,1)[0].remove(),Pt.splice(l,1),At.splice(l,1)),Ci("delSeries",l)};const Ct=[!1,!1,!1,!1];function Ht(l,e,t){let[n,i,o,s]=t,r=e%2,u=0;return 0==r&&(s||i)&&(u=0==e&&!n||2==e&&!o?rl(Ue.size/3):0),1==r&&(n||o)&&(u=1==e&&!i||3==e&&!s?rl(it.size/2):0),u}const Ft=k.padding=(u.padding||[Ht,Ht,Ht,Ht]).map((l=>bl(Q(l,Ht)))),Rt=k._padding=Ft.map(((l,e)=>l(k,e,Ct,0)));let Gt,Lt=null,en=null;const tn=1==M?pl[0].idxs:null;let nn,on,sn,rn,un,an,fn,cn,hn,dn,pn=null,mn=!1;function gn(l,e){if(k.data=k._data=g=null==l?[]:l,2==M){Gt=0;for(let l=1;pl.length>l;l++)Gt+=g[l][0].length}else{0==g.length&&(k.data=k._data=g=[[]]),pn=g[0],Gt=pn.length;let l=g;if(2==Ul){l=g.slice();let e=l[0]=Array(Gt);for(let l=0;Gt>l;l++)e[l]=l}k._data=g=l}if(An(!0),Ci("setData"),2==Ul&&(mt=!0),!1!==e){let l=jl;l.auto(k,mn)?xn():ii(El,l.min,l.max),xt=xt||oe.left>=0,_t=!0,Jn()}}function xn(){let l,e;mn=!0,1==M&&(Gt>0?(Lt=tn[0]=0,en=tn[1]=Gt-1,l=g[0][Lt],e=g[0][en],2==Ul?(l=Lt,e=en):l==e&&(3==Ul?[l,e]=B(l,l,jl.log,!1):4==Ul?[l,e]=$(l,l,jl.log,!1):jl.time?e=l+rl(86400/hl):[l,e]=Z(l,e,J,!0))):(Lt=tn[0]=l=null,en=tn[1]=e=null)),ii(El,l,e)}function wn(l,e,t,n,i,o){l??=a,t??=Fl,n??="butt",i??=a,o??="round",l!=nn&&(K.strokeStyle=nn=l),i!=on&&(K.fillStyle=on=i),e!=sn&&(K.lineWidth=sn=e),o!=un&&(K.lineJoin=un=o),n!=an&&(K.lineCap=an=n),t!=rn&&K.setLineDash(rn=t)}function _n(l,e,t,n){e!=on&&(K.fillStyle=on=e),l!=fn&&(K.font=fn=l),t!=cn&&(K.textAlign=cn=t),n!=hn&&(K.textBaseline=hn=n)}function bn(l,e,t,n,i=0){if(n.length>0&&l.auto(k,mn)&&(null==e||null==e.min)){let e=Q(Lt,0),o=Q(en,n.length-1),s=null==t.min?function(l,e,t,n=0,i=!1){let o=i?V:U,s=i?j:N;[e,t]=o(l,e,t);let r=l[e],u=l[e];if(e>-1)if(1==n)r=l[e],u=l[t];else if(-1==n)r=l[t],u=l[e];else for(let n=e;t>=n;n++){let e=l[n];s(e)&&(r>e?r=e:e>u&&(u=e))}return[r??gl,u??-gl]}(n,e,o,i,3==l.distr):[t.min,t.max];l.min=al(l.min,t.min=s[0]),l.max=fl(l.max,t.max=s[1])}}k.setData=gn;const vn={min:null,max:null};function kn(l,e){let t=e?pl[l].points:pl[l];t._stroke=t.stroke(k,l),t._fill=t.fill(k,l)}function yn(l,e){let t=e?pl[l].points:pl[l],{stroke:n,fill:i,clip:o,flags:s}=t._paths;let r=null,u=null,a=s&1,f=s&2;e&&!a&&(r=n,n=null),e&&!f&&(u=i,i=null),n&&(t._stroke!=n&&(t._stroke=n),wn(t._stroke),o&&K.clip(o.stroke),K.stroke(n)),i&&(t._fill!=i&&(t._fill=i),wn(t._fill),o&&K.clip(o.fill||o.stroke),K.fill(i)),r&&(wn(t._stroke),K.stroke(r)),u&&(wn(t._fill),K.fill(u)),o&&K.restore()}function Mn(l,e,t){let n=null;if(Tl.length>0){e??=0,t??=Gt-1;for(let i=0;Tl.length>i;i++){let o=Tl[i];null==n&&o.series[0]==l&&o.series[1]==e&&(n=[]),n&&o.series[0]==l&&o.series[1]==e&&n.push([sl(C(g[0][t],vl[o.scale||jl.key],ot,Qe)),sl(C(g[0][e],vl[o.scale||jl.key],ot,Qe)),()=>{return o.fill(k,i)},o.dir])}}return n}function Sn(l){if(null!=l)for(let e=0;l.length>e;e++){let[t,n,i,o]=l[e];-1==o?(wn(i(),null,"butt"),K.fillRect(al(t,n),Qe,ol(t-n),ot)):wn(null,i(),"butt"),K.fillRect(Qe,al(t,n),ot,ol(t-n))}}function Tn(l,e){let t,n,i,o,s,r,u,f=vl[l];if(0==f.ori)if(t=_l(e.stroke)?e.stroke(k,0):e.stroke,n=_l(e.dash)?e.dash(k,0):e.dash,i=_l(e.cap)?e.cap(k,0):e.cap,o=Al((_l(e.width)?e.width(k,0):e.width)*y,3),s=Qe,r=ot,u=t=>sl(C(t,f,ot,Qe)),oe.y&&(oe.y<=f.max&&oe.y>=f.min&&(s=u(oe.y)),xe)){let l=u(f.min),e=u(f.max);r=ol(e-l)}wn(t,null,i),K.beginPath();for(let t=0;e.values.length>t;t++){let n=e.values[t];if(null!=n){if(n<=f.max&&n>=f.min){let l=u(n);K.moveTo(s,l),K.lineTo(s+r,l)}}}if(o>0&&K.stroke(),e.bands){let l=e.bands(k);l&&Sn(l)}let a=e.markers;a&&(a.show&&($l(a,Lt,en)),a.values&&($l(a,0,a.values.length-1)));function f(l){if(null!=l)for(let e=0;l.length>e;e++){let t=l[e];if(null!=t&&t<=f.max&&t>=f.min){let l=u(t),e=s+r/2;a.show(k,e,l,0,0)&&(wn(a.stroke(k,0,t,e,l),a.fill(k,0,t,e,l),"round"),K.beginPath(),K.arc(e,l,a.size(k,0),0,2*il),K.fill(),K.stroke())}}}function $l(l,e,t){wn(l.stroke(k,0),l.fill(k,0),l.dash(k,0),l.cap(k,0));let n=Al(l.width(k,0)*y,3);if(n>0){K.beginPath();for(let n=e;t>=n;n++){let e=l.values[n];if(null!=e&&e<=f.max&&e>=f.min){let t=u(e);K.moveTo(s,t),K.lineTo(s+r,t)}}K.stroke()}}}function En(l,e){let t,n,i,o,s,r,u=vl[l];if(1==u.ori)if(t=_l(e.stroke)?e.stroke(k,0):e.stroke,n=_l(e.dash)?e.dash(k,0):e.dash,i=_l(e.cap)?e.cap(k,0):e.cap,o=Al((_l(e.width)?e.width(k,0):e.width)*y,3),s=lt,r=st,u=t=>sl(C(t,u,st,lt)),oe.x&&(oe.x<=u.max&&oe.x>=u.min&&(s=u(oe.x)),xe)){let l=u(u.min),e=u(u.max);r=ol(e-l)}wn(t,null,i),K.beginPath();for(let t=0;e.values.length>t;t++){let n=e.values[t];if(null!=n){if(n<=u.max&&n>=u.min){let l=u(n);K.moveTo(l,s),K.lineTo(l,s+r)}}}if(o>0&&K.stroke(),e.bands){let l=e.bands(k);l&&Sn(l)}let a=e.markers;a&&(a.show&&($l(a,Lt,en)),a.values&&($l(a,0,a.values.length-1)));function f(l){if(null!=l)for(let e=0;l.length>e;e++){let t=l[e];if(null!=t&&t<=u.max&&t>=u.min){let l=u(t),e=s+r/2;a.show(k,l,e,0,0)&&(wn(a.stroke(k,0,t,l,e),a.fill(k,0,t,l,e),"round"),K.beginPath(),K.arc(l,e,a.size(k,0),0,2*il),K.fill(),K.stroke())}}}function $l(l,e,t){wn(l.stroke(k,0),l.fill(k,0),l.dash(k,0),l.cap(k,0));let n=Al(l.width(k,0)*y,3);if(n>0){K.beginPath();for(let n=e;t>=n;n++){let e=l.values[n];if(null!=e&&e<=u.max&&e>=u.min){let t=u(e);K.moveTo(t,s),K.lineTo(t,s+r)}}K.stroke()}}}function zn(l,e,t,n,i,o,s,r,u,a){if(0!=e.length){let f=l.slice(),c=f[0],h=f[f.length-1];if(1==n||2==n){if(0==t){for(let l=c;l<=h;l++)K.moveTo(l,i),K.lineTo(l,o);if(wn(r,null,a,null,"round"),u&&K.setLineDash(u),s>0&&K.stroke(),e.length>1){e[0]!=c&&e.unshift(c),e[e.length-1]!=h&&e.push(h);for(let l=1;e.length-1>l;l++)f.splice(L(e[l],f),1)}}else{for(let l=c;l<=h;l++)K.moveTo(i,l),K.lineTo(o,l);if(wn(r,null,a,null,"round"),u&&K.setLineDash(u),s>0&&K.stroke(),e.length>1){e[0]!=c&&e.unshift(c),e[e.length-1]!=h&&e.push(h);for(let l=1;e.length-1>l;l++)f.splice(L(e[l],f),1)}}K.beginPath()}else if(0==n||3==n){if(0==t){for(let l=0;e.length>l;l++){let t=e[l];K.moveTo(t,i),K.lineTo(t,o)}}else for(let l=0;e.length>l;l++){let t=e[l];K.moveTo(i,t),K.lineTo(o,t)}wn(r,null,a,null,"round"),u&&K.setLineDash(u),s>0&&K.stroke(),K.beginPath()}}}function Dn(l,e,t){if(re&&te[l]!=e){if(e)for(let l=1;te.length>l;l++)te[l]=null;te[l]=e;let n=oe.idxs[l];if(n!=e){oe.idxs[l]=e;for(let t=0;Dt.length>t;t++)if(t!=l||!zt){let n=Dt[t];if(n){if(null==e)E(n,"transform","translate(-10px, -10px)");else{let i=te[t];if(null!=i){let o=$l(g[0][i],vl[pl[t].scale||El],ot,Qe),s=ql(g[t][i],vl[pl[t].scale],st,lt);E(n,"transform","translate("+o+"px, "+s+"px)");let r=Pt[t],u=At[t],a=oe.points.width(k,t,r),f=oe.points.fill(k,t),c=oe.points.stroke(k,t);u!=r&&(u=Pt[t]=r,n.style.background=f,n.style.borderWidth=a+"px",n.style.borderColor=c),a!=At[t]&&(At[t]=a,n.style.borderWidth=a+"px")}else E(n,"transform","translate(-10px, -10px)")}}}}!oe._lock&&(null!=e?Tn(xl[0].scale,xl[0]):null!=e&&1<xl.length&&En(xl[1].scale,xl[1])),t&&Ci("setCursor")}}let Pn,An=l=>{mn=l},Wn=null;function Yn(){xt&&!1!==Tt.prox&&(oe.idx==Pn&&oe.idxs[Pn]==oe.idx||oi(Pn,ai,!0,!1))}function Cn(){if(re&&Gt>0&&_t){_t=!1;let l=null;if(null!=Lt&&null!=en){if(l=oe.dataIdx(k,pl.length>1?pl[oe.idx].idxs||pl[1].idxs||tn:tn,oe.left>=0?oe.left:0,oe.top>=0?oe.top:0),te[0]=null==l?null:l,null!=l){let e=g[0][l];if(l==Pn&&e==Wn)return;Pn=l,Wn=e;for(let e=0;te.length>e;e++)oe.idxs[e]=1==e||null==l?l:pl[e].idxs?pl[e].idxs[l]:l;Yn()}else null!=Pn&&(Pn=null,Yn())}for(let e=0;te.length>e;e++)Dn(e,te[e],!0,!1);!oe._lock&&null!=l&&En(xl[1].scale,xl[1])}}function Hn(){return oe.left>=0&&oe.left<=ot&&oe.top>=0&&oe.top<=st}function Fn(l,e,t){let n=!0;if(Gt>0)if(null!=Lt&&null!=en)if(oe.left<0||oe.left>ot||oe.top<0||oe.top>st)n=!1;else{let i=g[0],o=$l(i[Lt],vl[El],ot,Qe),s=$l(i[en],vl[El],ot,Qe),r=l;if(l<fl(o,s)&&(r=o),l>al(o,s)&&(r=s),oe.left=r,t){if(ie.live)for(let l in we){let e=0;if(pl.length>1){let t=pe._[l];for(let n=1;pl.length>n;n++){let i=pl[n];if(i.show&&null!=i.idxs)for(let o=0;i.idxs.length>o;o++){let s=i.idxs[o];if(null!=g[n][s]){let r,u=i.values(k,n,s)||{};u[l]&&(r=u[l](k,n,s,g[n][s],i.idxs,g[n]),null!=r&&(e=Al(r,t||6)))}}}e!=we[l]&&(we[l]=e,ge[0][t].textContent=e,t++)}}else we._=oe.left,ge[0][0].textContent=we._}}else n=!1;else n=!1;n?(A(el,oe.left,oe.top,ot,st),re&&(Cn(),Tt.prox>=0&&Et&&(xt=Hn(),xt||Yn()))):A(el,-10,-10,ot,st)}let Rn,Gn=0,In=0,Ln=Ie,On=Le,jn=0,Un=0,Vn=0,Bn=0,$n=0,Jn=()=>{mt&&(Pl.forEach((l=>l())),Ci("draw"),mt=!1)},qn={setSeries:(l,e,t)=>oi(l,e,!0,t)};for(let l in qn)k[l]=qn[l];function Kn(l,e,t){t=Vl(t||{});let n=t.focus||{};void 0==n.prox&&(n.prox=Et?yt:gl);let i=k.mode;k.mode=1;const o=k.hooks;k.hooks={};k.cursor=Bl({},oe,{drag:{x:!1,y:!1},points:{show(){return!1}}},t.cursor);const s=k.focus;k.focus=Bl({},Tt,n);const r=t.axes||[];k.axes=r.map(((l,e)=>Bl({},1>e?Ue:it,l)));const u=t.series||[];k.series=u.map(((l,e)=>Bl({},0==e?Ve:ut,l))),en(k,l,e),k.axes=xl,k.series=pl,k.hooks=o,k.cursor=oe,k.focus=s,k.mode=i}function Xn(l,e,t){if(Gt>0){if(null==t&&(t={}),1==k.mode){if(l=null==l?{}:l,null!=e){let n=Object.keys(e);n.length>0&&(l.width=Rt(g[0],g[1],C,vl[El],ot,Qe)+96)}if(l.width)l.width=al(l.width,k.width);if(l.height)l.height=al(l.height,k.height);Kn(g,l,t);let{ctx:n}=k;n.clearRect(0,0,k.width,k.height),k.bbox.width>0&&k.bbox.height>0&&(gn(g,!1),k.axes.forEach(((l,e)=>{l.show&&l.values&&l.values.length>0&&(1==l.side%2?En(l.scale,l):Tn(l.scale,l))})));let i=new ImageData(k.width,k.height);return n.getImageData(0,0,k.width,k.height).data.set(i.data),n.putImageData(i,0,0),k}if(2==k.mode){let{series:n}=k,i=t.devicePixelRatio||1,o=Object.assign({legend:!1},t);o.width??=g[1][0].length+96,o.height??=n.length*64;let s=[g[0],g[1][0]],r=s[1].slice();s[1]=s[1].map((l=>0));let u=n.filter((l=>l.show)).map((l=>{const e=l.scale,t=vl[e],n={scale:e,auto:!0,range:t.range};return Object.assign({},l,{scale:l.label,facets:[Object.assign({},l.facets[0]),Object.assign({},n)]})}));u.forEach(((l,e)=>{l.width=2,l.points={show:!1};const t=g[e+1];null!=t&&l.show&&(s[1][e]=1,r.forEach(((n,i)=>{s.push([t[i]])})))})),o.series=u,o.axes=[o.axes[0]],o.scales&&delete o.scales.y,o.width=o.width*i,o.height=o.height*i;let a=Wn(s,o.width,o.height,o);return a.ctx.scale(i,i),a.ctx.fillStyle="white",a.ctx.fillRect(0,0,o.width,o.height),n.forEach(((l,e)=>{if(l.show&&g[e+1]){let t=a.series[e+1];t.scale=l.facets[1].scale,t._paths=null,t.min=l.min,t.max=l.max}})),a.setData(s,!1),a.canvas}}return null}const Zn={show:!0,live:!0,mount:()=>{}};let Qn=[],li=[],ei=!1,ti={};function ni(l,e,t){let n={left:oe.left,top:oe.top,idx:oe.idx},i=Object.assign({},n,t),o=n.left,s=n.top,r=i.left,u=i.top,a=n.idx,f=i.idx;if(o!=r||s!=u){oe.left=r,oe.top=u,Fn(r,s,r>=0&&u>=0);let l=Hn();l&&(xt=xt||l)}if(a!=f){let e=te.slice();e[f]=null!=f?f:null,oe.idx=f,Dn(f,null!=f?f:null,!0,!0);for(let t=0;e.length>t;t++)e[t]!=te[t]&&Ci("setSelect",t,te[t])}if(e){let e={left:o,top:s,idx:a},n={left:r,top:u,idx:f};e.left=o,e.top=s,e.idx=a,n.left=r,n.top=u,n.idx=f;for(let i=0;Qn.length>i;i++)Qn[i].pub(l,k,e,n,t)}}k.valToIdx=l=>L(l,g[0]),k.posToIdx=l=>k.valToIdx(k.posToVal(l,El)),k.posToVal=(l,e,t)=>jl==vl[e]?xn?2==Ul?l:pn[l]:t?0:0:(()=>{let t=vl[e],n=0==t.ori?ot:st,i=0==t.ori?Qe:lt;return t.min+l/n*t.max-l/n*t.min})(l,e),k.valToPos=(l,e,t)=>C(l,vl[e],0==vl[e].ori?ot:st,0==vl[e].ori?Qe:lt),k.batch=l=>{l(k),Jn()},k.destroy=()=>{He(),Ci("destroy"),R.remove()},k.redraw=(l,e)=>{pt=!0,!1!==e&&(mt=!0),Jn()},k.setScale=(l,e)=>{ii(l,e.min,e.max),Jn()};let ii=(l,e,t)=>{let n=vl[l];null!=e&&(n.min=e),null!=t&&(n.max=t),n._min=n.min,n._max=n.max};k.setSelect=ni;let oi=(l,e,t,n)=>{let i=e.focus,o=null!=i?pl[i]:null;if(t){if(1==M&&null!=o&&o!=pl[l]&&o._focus){let e=Mn(l,i);e&&Sn(e)}null!=o&&(o._focus=!1)}for(let t in e)if("focus"!=t)if("show"==t)if(pl[l][t]=e[t],se){let n=me[l];null!=n&&(e[t]?T(n,l):S(n,l));let i=ie.markers;if(i.show)for(let e=0;n.children.length>e;e++){let t=n.children[e].firstChild.firstChild;t&&(t.style.background=i.fill(k,l))}}else if("values"==t)pl[l][t]=e[t];if(null!=o&&(o._focus=!0),t&&Mt("setSeries",l,e),n){let l=pl.findIndex((l=>l._focus));Mt("setFocus",l)}t&&Jn()};k.setSeries=oi,k.addHook=(l,e)=>(Qn.push(dt(l)),e&&Qn[Qn.length-1].sub(e),Qn[Qn.length-1]),k.delHook=l=>{l.unsub(k)},k.setData=gn,k.setLegend=(l,e)=>{if(ie.show=null==l.show||l.show,ie.live!=l.live){ie.live=l.live;let t=".u-value",n=ie.live?S:T;if(ge.length>0){ge[0].forEach((l=>{n(l,t.slice(1))}));for(let l=1;ge.length>l;l++)ge[l]&&ge[l].forEach((l=>{n(l,t.slice(1))}))}n(ce,"u-live")}e&&Ci("setLegend")},k.setCursor=Mt;let si=!1;function ri(){si||(si=!0,v.addEventListener("mousemove",Mt,!0),v.addEventListener("mouseup",ui,!0))}function ui(){si&&(si=!1,v.removeEventListener("mousemove",Mt,!0),v.removeEventListener("mouseup",ui,!0))}function ai(l,e){if(Et){let t=Tt.dist(k,pl.length>1?pl[oe.idx]:pl[1],oe.left,oe.top,e);if(t<=Tt.prox)return null}return oe.left}pl.length>1&&(pl.forEach(Yt),oe.show&&(He(),xl.forEach(((l,e)=>{if(l.show){let t=xl[e].side%2,n="mousemove mousedown mouseup dblclick";if(t&&(n+=" wheel"),1==t){let t=re&&oe.y,i=()=>{let e=!0;return(n,i,o,s)=>{if(t){let t=Qe,n=st,i=!0;if(i){let i=u=>sl(C(u,vl[l.scale],n,t));oe.top=i(oe.y);let o=ol(C(s,vl[l.scale],n,t)-C(o,vl[l.scale],n,t));return o<=Tt.prox}}return e}};Ce(n,xl[e]._el=D("u-cursor-x",el),i())}else if(0==t){let t=re&&oe.x,i=()=>{let e=!0;return(n,i,o,s)=>{if(t){let t=Qe,n=ot,i=!0;if(i){let i=u=>sl(C(u,vl[l.scale],n,t));oe.left=i(oe.x);let o=ol(C(s,vl[l.scale],n,t)-C(o,vl[l.scale],n,t));return o<=Tt.prox}}return e}};Ce(n,xl[e]._el=D("u-cursor-y",el),i())}}})),se&&(Ce("click",ce,(l=>{if(!oe._lock){Mt(l);let e=l.target.closest("tr"),t=me.indexOf(e);oi(t,{focus:!oe.idx==t},!0,Fi.setSeries)}})),ie.live&&Ce("click",ce,(l=>{if(!oe._lock){Mt(l);let e=l.target.closest("th");if(e){let t=e.closest("tr"),n=me.indexOf(t);if(n>0){let e=l.target.closest(".u-marker");if(e&&ie.markers.show)oi(n,{show:!pl[n].show},!0,Fi.setSeries);else{let e=l.target.classList.contains("u-value")||l.target.closest("td");e||oi(n,{focus:!pl[n]._focus},!0,Fi.setSeries)}}}}})),oe.drag.x||oe.drag.y)){let l="onpointerdown"in b;Ce(l?"pointerdown":"mousedown",el,(t=>{ri(),oe._lock=!0,Mt(t);let n=oe.left,i=oe.top;Ce(l?"pointermove":"mousemove",b,(l=>{if(oe._lock){Mt(l);let o=oe.left,s=oe.top,r=n,u=i;if(oe.drag.x&&(r=o),oe.drag.y&&(u=s),n!=r||i!=u){n=r,i=u;let o=oe.left,s=oe.top;oe.left=r,oe.top=u,Fn(r,u,!1),oe.left=o,oe.top=s}}})),Ce(l?"pointerup":"mouseup",b,(e=>{let t=oe.left,o=oe.top;oe._lock=!1,Mt(e),n==t&&i==o&&oe.drag.setScale&&(0==t&&0==o||Fn(t,o,!0))}))})),xl.length>1&&Ce("wheel",el,(l=>{if(!oe._lock){Mt(l),l.preventDefault();let{left:e,top:t}=oe,n=oe.drag.uni;if(null!=n){let i=(0>l.deltaY?-1:1)*(null==n?1:n);1==xl[0].ori?0==e&&0==t||(0!=e&&jl.min<jl.max&&Sn(vl[xl[0].scale],e,i),0!=t&&xl.length>1&&Sn(vl[xl[1].scale],t,i)):0==e&&0==t||(0!=t&&xl.length>1&&Sn(vl[xl[1].scale],t,i),0!=e&&Sn(vl[xl[0].scale],e,i))}}}));function Sn(l,e,t){if(l.min!=l.max){let{min:n,max:i}=l,o=dl((i-n)*(l.ori?e/(0==l.ori?ot:st):1-(e/(0==l.ori?ot:st))));[n,i]=B(ol(n-o),ol(i+o),2,!0),ii(l.key,n,i),mt=!0,Jn()}}Ce("dblclick",el,(l=>{oe._lock||(Mt(l),0==oe.left&&0==oe.top||function(){for(let l in vl){let e=vl[l];e.min=e._min,e.max=e._max}k.setData(g)}(),Jn())}))}let fi;return ce&&Ce("click",ce,(l=>{if(Mt(l),!oe._lock){let e=L(oe.left,Qn.map((l=>l.getBoundingClientRect().left)));fi!=e&&(null!=fi&&T(li[fi],"u-cursor-x"),null!=e&&S(li[e],"u-cursor-x"),fi=e)}})),k.setSize=function(l){vt(l.width,l.height),Jn()},k.syncRect=function(l){if(l||k.width!=Fe||k.height!=Ge)kt(Ie,Le);let e=!1,t=!1;if(O.width!=Ie||O.height!=Le)O.width=Ie,O.height=Le,e=!0;let n=sl(Ie*y),i=sl(Le*y);n==O.width&&i==O.height||(O.style.width=n+"px",O.style.height=i+"px",t=!0,e=!0),e&&(Vn=0,Bn=0,Ln=Ie,On=Le),!function(l,e){let t=R.getBoundingClientRect(),n=rl(t.left),i=rl(t.top);Gn==n&&In==i||(Gn=n,In=i,ht=!0),ht&&l&&(ht=!1)}(e||ot!=st||Qe!=lt,!1),oe.show&&!oe._lock&&(xt||et)&&(Cn(),xt&&!1!==Tt.prox&&Yn(),_t=!1)},xl.forEach((l=>{let e=l.side%2,t=1-e;0==le[e]&&(l._el=z("div","u-axis u-axis-"+e,el));let{_el:n}=l;if(l.show)if(n){if(t){n.style.height=st+"px",n.style[s]=l._pos+"px",n.style[i]=l.side%4<2?lt+"px":"",n.style[o]=l.side%4>=2?lt+"px":""}else{n.style.width=ot+"px",n.style[i]=l._pos+"px",n.style[s]=l.side%4<2?Qe+"px":"",n.style[r]=l.side%4>=2?Qe+"px":""}let e=Zn.mount(k,n);null!=e&&(n.innerHTML=e)}else A(n,-10,-10,ot,st)})),It.add(k),k},en.assign=Bl,en.fmtNum=tl,en.tzDate=(l,e)=>new Date(l/1e3),en.sync=dt,en.join=function(l,e,t){function n(e){let n=null;for(let l=0;e.length>l;l++){let i=e[l].cursor.idxs[t];if(null!=i){n=i;break}}for(let t=0;e.length>t;t++)e[t].cursor.idx=n;for(let t=0;e.length>t;t++){e[t].setSelect({idx:n},!1)}}e.sub(n),l.forEach((l=>{l.hooks.setSelect.push(n),l.hooks.setCursor.push(n)}))},en.paths={spline:Gt,linear:(l,e)=>pt(l,e,((l,e,t,n,i,o,s,r,u,a,f)=>{[t,i]=U(t,n,i);let c,h,d=l.pxRound,p=l=>d(o(l,n,a,r)),m=l=>d(s(l,i,f,u));0==n.ori?(c=kt,h=Mt):(c=yt,h=St);const g={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},x=g.stroke;let w=!1;for(let l=n<=i?t:i;l>=t&&i>=l;l+=n.dir*(0==n.ori?1:-1)){let e=t[l];null===e?w=!0:null!=e&&h(x,p(e[l]),m(e))}let[_,b]=mt(l,e);if(null!=l.fill||0!=_){let n=g.fill=new Path2D(x),o=m(l.fillTo(l,e,l.min,l.max,_)),s=p(e[t]),u=p(e[i]);-1==n.dir&&([u,s]=[s,u]),c(n,u,o),c(n,s,o)}if(!l.spanGaps){let u=[];w&&u.push(..._t(e,t,n,i,n.dir,p,e)),g.gaps=u=l.gaps(l,e,n,i,u),g.clip=wt(u,n.ori,r,u,a,f)}return 0!=b&&(g.band=2==b?[xt(l,e,n,i,x,-1),xt(l,e,n,i,x,1)]:xt(l,e,n,i,x,b)),g})),stepped:l=>Ft({alignGaps:l}),bars:l=>function(l){const e=Q(l?.size,[.6,gl,1]),t=Q(l?.align,0),n=Q(l?.ori,0),i=Q(l?.dir,1),o=Q(l?.radius,0),s=Q(l?.disp?.fill,{}),,u=Q(l?.disp?.stroke,{}),a=Q(l?.each,((l,e,t,n,i,o,s)=>{}));return(l,f,c,h)=>pt(l,f,((l,p,m,g,x,w,_,b,v,k,y)=>{[c,h]=U(m,c,h);let M,S,T,E=0==g.ori;E?(M=Mt,S=1==i?0:k,T=b):(M=St,S=1==i?v:0,T=v),i*=E?1:-1;let z,D,P=l.pxRound,A=E?P(w(g.min,g,k,b)):P(_(x.min,x,y,v)),W=E?P(w(g.max,g,k,b)):P(_(x.max,x,y,v)),Y=A,C=W;A>W&&(A=W,W=Y);let H=e[0]>=0?e[0]:0,F=e[1]>=0?e[1]:gl,R=e[2]>=0?e[2]:1,G=Al(H*Al((E?k:y)/10,3)),I=Al(F*Al((E?k:y)/10,3)),L=Al(R*Al((E?k:y)/10,3)),O=!0,N=!0,j=null;1!=l.mode&&(j=E?g.dist(l,p,c,h):x.dist(l,p,c,h));let V=g.dir*(E?1:-1),B=1==V?(E?$l:w):E?w:_;z=1==V?c:h,D=1==V?h:c;let J=!0,q=!0,K=null,X={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},Z=X.stroke;for(let e=1==V?z:D;e>=z&&D>=e;e+=V){let i=P(B(p[e],g,E?k:y,E?b:v)),s=m[e];if(1==l.mode||null!=j&&null!=s){if(null===s){if(!0===O&&(O=!1),!0===N){N=!1;continue}}else!1===O&&(O=!0),!1===N&&(N=!0);if(null!=s){let f,p=P(E?_(s,x,y,v):w(s,g,k,b)),m=E?ol(i-T)/2:ol(i-S)/2,z=null!=j?sl(j)+1:L,D=al(G,z),V=al(I,z),B=E?al(D,m):D,J=E?al(V,m):V,q=E?D:al(D,m),K=E?al(V,m):V,ee=Al(p-A,6)<Al(C-A,6);r||ee||(E?(f=A,E&&(B=J=q=K=0)):(f=A,E||(B=J=q=K=0)));let te=E?i-B:i-q,ne=E?i+J:i+K,ie=E?f:te,oe=E?te:f,se=E?ne-te:K+q,re=E?J+B:ne-oe;vt(n)(Z,ie,oe,se,re,o),a(l,f,c,h,s,p,e)}}}}let $=null!=s.fill?s.fill(l,f):null,ll=null!=s.stroke?s.stroke(l,f):null;return $.update(X,k,y,b,v),$&&(X.fill=new Path2D(Z)),ll&&ll.update(X,k,y,b,v),X}))}(l?.bands)},en.orient=(l,e,t)=>0==e.ori?3==e.dir?[1-l[0],1-l[1]]:[l[0],l[1]]:1==e.dir?[l[0],1-l[1]]:[1-l[0],l[1]],en}();
"""
}